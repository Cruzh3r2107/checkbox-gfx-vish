id: levelzerobins
plugin: resource
command:
    echo 'binname: test_api_tracing'
    echo 'command: sudo /usr/local/checkbox-gfx/test_api_tracing'
    echo
    echo 'binname: test_sysman_events'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_events'
    echo
    echo 'binname: test_ipc_p2p_memory'
    echo 'command: sudo /usr/local/checkbox-gfx/test_ipc_p2p_memory'
    echo
    echo 'binname: test_sysman_device_zesinit'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_device_zesinit'
    echo
    echo 'binname: test_usm'
    echo 'command: sudo /usr/local/checkbox-gfx/test_usm'
    echo
    echo 'binname: test_driver_errors'
    echo 'command: sudo /usr/local/checkbox-gfx/test_driver_errors'
    echo
    echo 'binname: test_image'
    echo 'command: sudo /usr/local/checkbox-gfx/test_image'
    echo
    echo 'binname: test_sysman_performance_zesinit'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_performance_zesinit'
    echo
    echo 'binname: test_sysman_psu'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_psu'
    echo
    echo 'binname: test_ipc_memory'
    echo 'command: sudo /usr/local/checkbox-gfx/test_ipc_memory'
    echo
    echo 'binname: test_init_sysman_before_core'
    echo 'command: sudo /usr/local/checkbox-gfx/test_init_sysman_before_core'
    echo
    echo 'binname: test_ipc_multisubdevice'
    echo 'command: sudo /usr/local/checkbox-gfx/test_ipc_multisubdevice'
    echo
    echo 'binname: test_fence'
    echo 'command: sudo /usr/local/checkbox-gfx/test_fence'
    echo
    echo 'binname: test_sysman_standby_zesinit'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_standby_zesinit'
    echo
    echo 'binname: test_sysman_diagnostics_zesinit'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_diagnostics_zesinit'
    echo
    echo 'binname: test_init_sysman_enum_freq_with_core_handle'
    echo 'command: sudo /usr/local/checkbox-gfx/test_init_sysman_enum_freq_with_core_handle'
    echo
    echo 'binname: test_stress_atomics'
    echo 'command: sudo /usr/local/checkbox-gfx/test_stress_atomics'
    echo
    echo 'binname: test_sysman_pci_zesinit'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_pci_zesinit'
    echo
    echo 'binname: test_sysman_firmware'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_firmware'
    echo
    echo 'binname: test_sysman_ras_zesinit'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_ras_zesinit'
    echo
    echo 'binname: test_sysman_power'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_power'
    echo
    echo 'binname: ze_peak'
    echo 'command: sudo /usr/local/checkbox-gfx/ze_peak'
    echo
    echo 'binname: test_sysman_ras'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_ras'
    echo
    echo 'binname: test_sysman_device'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_device'
    echo
    echo 'binname: test_mutable_cmdlist'
    echo 'command: sudo /usr/local/checkbox-gfx/test_mutable_cmdlist'
    echo
    echo 'binname: test_sysman_power_zesinit'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_power_zesinit'
    echo
    echo 'binname: ze_bandwidth'
    echo 'command: sudo /usr/local/checkbox-gfx/ze_bandwidth'
    echo
    echo 'binname: test_sysman_overclocking_zesinit'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_overclocking_zesinit'
    echo
    echo 'binname: test_sysman_firmware_zesinit'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_firmware_zesinit'
    echo
    echo 'binname: test_copy'
    echo 'command: sudo /usr/local/checkbox-gfx/test_copy'
    echo
    echo 'binname: test_sysman_diagnostics'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_diagnostics'
    echo
    echo 'binname: test_sysman_pci'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_pci'
    echo
    echo 'binname: test_driver_init_flag_gpu'
    echo 'command: sudo /usr/local/checkbox-gfx/test_driver_init_flag_gpu'
    echo
    echo 'binname: test_ipc_multidevice'
    echo 'command: sudo /usr/local/checkbox-gfx/test_ipc_multidevice'
    echo
    echo 'binname: test_memory_overcommit'
    echo 'command: sudo /usr/local/checkbox-gfx/test_memory_overcommit'
    echo
    echo 'binname: ze_peer'
    echo 'command: sudo /usr/local/checkbox-gfx/ze_peer'
    echo
    echo 'binname: test_stress_memory_allocation'
    echo 'command: sudo /usr/local/checkbox-gfx/test_stress_memory_allocation'
    echo
    echo 'binname: test_pin'
    echo 'command: sudo /usr/local/checkbox-gfx/test_pin'
    echo
    echo 'binname: test_debug_errors'
    echo 'command: sudo /usr/local/checkbox-gfx/test_debug_errors'
    echo
    echo 'binname: test_init_sysman_no_env_with_core_handle'
    echo 'command: sudo /usr/local/checkbox-gfx/test_init_sysman_no_env_with_core_handle'
    echo
    echo 'binname: test_ipc_put_handle'
    echo 'command: sudo /usr/local/checkbox-gfx/test_ipc_put_handle'
    echo
    echo 'binname: test_sysman_engine'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_engine'
    echo
    echo 'binname: test_sysman_events_zesinit'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_events_zesinit'
    echo
    echo 'binname: test_sampler'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sampler'
    echo
    echo 'binname: test_sysman_fabric'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_fabric'
    echo
    echo 'binname: test_device'
    echo 'command: sudo /usr/local/checkbox-gfx/test_device'
    echo
    echo 'binname: ze_nano'
    echo 'command: sudo /usr/local/checkbox-gfx/ze_nano'
    echo
    echo 'binname: test_sysman_psu_zesinit'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_psu_zesinit'
    echo
    echo 'binname: test_module'
    echo 'command: sudo /usr/local/checkbox-gfx/test_module'
    echo
    echo 'binname: test_driver_init_flag_vpu'
    echo 'command: sudo /usr/local/checkbox-gfx/test_driver_init_flag_vpu'
    echo
    echo 'binname: test_cmdqueue'
    echo 'command: sudo /usr/local/checkbox-gfx/test_cmdqueue'
    echo
    echo 'binname: test_driver'
    echo 'command: sudo /usr/local/checkbox-gfx/test_driver'
    echo
    echo 'binname: test_context'
    echo 'command: sudo /usr/local/checkbox-gfx/test_context'
    echo
    echo 'binname: ze_pingpong'
    echo 'command: sudo /usr/local/checkbox-gfx/ze_pingpong'
    echo
    echo 'binname: test_sysman_fan'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_fan'
    echo
    echo 'binname: test_driver_init_flag_vpu_gpu'
    echo 'command: sudo /usr/local/checkbox-gfx/test_driver_init_flag_vpu_gpu'
    echo
    echo 'binname: test_cmdlist'
    echo 'command: sudo /usr/local/checkbox-gfx/test_cmdlist'
    echo
    echo 'binname: test_init_sysman_enum_freq_with_sysman_handle'
    echo 'command: sudo /usr/local/checkbox-gfx/test_init_sysman_enum_freq_with_sysman_handle'
    echo
    echo 'binname: test_fabric'
    echo 'command: sudo /usr/local/checkbox-gfx/test_fabric'
    echo
    echo 'binname: test_sysman_scheduler_zesinit'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_scheduler_zesinit'
    echo
    echo 'binname: test_debug'
    echo 'command: sudo /usr/local/checkbox-gfx/test_debug'
    echo
    echo 'binname: test_metric'
    echo 'command: sudo /usr/local/checkbox-gfx/test_metric'
    echo
    echo 'binname: test_event'
    echo 'command: sudo /usr/local/checkbox-gfx/test_event'
    echo
    echo 'binname: test_template'
    echo 'command: sudo /usr/local/checkbox-gfx/test_template'
    echo
    echo 'binname: test_cmdlist_errors'
    echo 'command: sudo /usr/local/checkbox-gfx/test_cmdlist_errors'
    echo
    echo 'binname: test_api_ltracing'
    echo 'command: sudo /usr/local/checkbox-gfx/test_api_ltracing'
    echo
    echo 'binname: test_p2p'
    echo 'command: sudo /usr/local/checkbox-gfx/test_p2p'
    echo
    echo 'binname: test_sysman_temperature'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_temperature'
    echo
    echo 'binname: test_sysman_standby'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_standby'
    echo
    echo 'binname: test_ipc'
    echo 'command: sudo /usr/local/checkbox-gfx/test_ipc'
    echo
    echo 'binname: test_memory'
    echo 'command: sudo /usr/local/checkbox-gfx/test_memory'
    echo
    echo 'binname: test_sysman_ecc_zesinit'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_ecc_zesinit'
    echo
    echo 'binname: test_init_sysman'
    echo 'command: sudo /usr/local/checkbox-gfx/test_init_sysman'
    echo
    echo 'binname: test_residency'
    echo 'command: sudo /usr/local/checkbox-gfx/test_residency'
    echo
    echo 'binname: test_sysman_overclocking'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_overclocking'
    echo
    echo 'binname: test_init_sysman_after_core'
    echo 'command: sudo /usr/local/checkbox-gfx/test_init_sysman_after_core'
    echo
    echo 'binname: test_cmdqueue_errors'
    echo 'command: sudo /usr/local/checkbox-gfx/test_cmdqueue_errors'
    echo
    echo 'binname: test_sysman_frequency_zesinit'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_frequency_zesinit'
    echo
    echo 'binname: test_sysman_temperature_zesinit'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_temperature_zesinit'
    echo
    echo 'binname: test_device_errors'
    echo 'command: sudo /usr/local/checkbox-gfx/test_device_errors'
    echo
    echo 'binname: test_sysman_fabric_zesinit'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_fabric_zesinit'
    echo
    echo 'binname: test_sysman_led'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_led'
    echo
    echo 'binname: test_multithread'
    echo 'command: sudo /usr/local/checkbox-gfx/test_multithread'
    echo
    echo 'binname: test_sysman_memory'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_memory'
    echo
    echo 'binname: ze_image_copy'
    echo 'command: sudo /usr/local/checkbox-gfx/ze_image_copy'
    echo
    echo 'binname: test_sysman_fan_zesinit'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_fan_zesinit'
    echo
    echo 'binname: test_stress_misc'
    echo 'command: sudo /usr/local/checkbox-gfx/test_stress_misc'
    echo
    echo 'binname: test_module_errors'
    echo 'command: sudo /usr/local/checkbox-gfx/test_module_errors'
    echo
    echo 'binname: test_metric_tracer_and_programmable'
    echo 'command: sudo /usr/local/checkbox-gfx/test_metric_tracer_and_programmable'
    echo
    echo 'binname: test_metric_errors'
    echo 'command: sudo /usr/local/checkbox-gfx/test_metric_errors'
    echo
    echo 'binname: test_driver_init_flag_none'
    echo 'command: sudo /usr/local/checkbox-gfx/test_driver_init_flag_none'
    echo
    echo 'binname: test_sysman_engine_zesinit'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_engine_zesinit'
    echo
    echo 'binname: test_zesdevice_errors'
    echo 'command: sudo /usr/local/checkbox-gfx/test_zesdevice_errors'
    echo
    echo 'binname: test_sysman_memory_zesinit'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_memory_zesinit'
    echo
    echo 'binname: test_sysman_performance'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_performance'
    echo
    echo 'binname: test_sysman_ecc'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_ecc'
    echo
    echo 'binname: test_multiprocess'
    echo 'command: sudo /usr/local/checkbox-gfx/test_multiprocess'
    echo
    echo 'binname: test_barrier'
    echo 'command: sudo /usr/local/checkbox-gfx/test_barrier'
    echo
    echo 'binname: test_handle_tracking_errors'
    echo 'command: sudo /usr/local/checkbox-gfx/test_handle_tracking_errors'
    echo
    echo 'binname: test_sysman_led_zesinit'
    echo 'command: sudo /usr/local/checkbox-gfx/test_sysman_led_zesinit'
    echo

id: levelzeroraytracingtests
plugin: resource
command:
    echo 'testname: embree_rthwif_cornell_box'
    echo 'command: embree_rthwif_cornell_box --default-rtas-builder --compare cornell_box_reference.tga'
    echo
    echo 'testname: rthwif_test_builder_triangles_expected'
    echo 'command: embree_rthwif_test --default-rtas-builder --build_test_triangles --build_mode_expected'
    echo
    echo 'testname: rthwif_test_builder_procedurals_expected'
    echo 'command: embree_rthwif_test --default-rtas-builder --build_test_procedurals --build_mode_expected'
    echo
    echo 'testname: rthwif_test_builder_instances_expected'
    echo 'command: embree_rthwif_test --default-rtas-builder --build_test_instances --build_mode_expected'
    echo
    echo 'testname: rthwif_test_builder_mixed_expected'
    echo 'command: embree_rthwif_test --default-rtas-builder --build_test_mixed --build_mode_expected'
    echo
    echo 'testname: rthwif_test_benchmark_triangles'
    echo 'command: embree_rthwif_test --default-rtas-builder --benchmark_triangles'
    echo
    echo 'testname: rthwif_test_benchmark_procedurals'
    echo 'command: embree_rthwif_test --default-rtas-builder --benchmark_procedurals'
    echo
    echo 'testname: rthwif_test_builder_triangles_worst_case'
    echo 'command: embree_rthwif_test --default-rtas-builder --build_test_triangles --build_mode_worst_case'
    echo
    echo 'testname: rthwif_test_builder_procedurals_worst_case'
    echo 'command: embree_rthwif_test --default-rtas-builder --build_test_procedurals --build_mode_worst_case'
    echo
    echo 'testname: rthwif_test_builder_instances_worst_case'
    echo 'command: embree_rthwif_test --default-rtas-builder --build_test_instances --build_mode_worst_case'
    echo
    echo 'testname: rthwif_test_builder_mixed_worst_case'
    echo 'command: embree_rthwif_test --default-rtas-builder --build_test_mixed --build_mode_worst_case'
    echo
    echo 'testname: rthwif_test_triangles_committed_hit'
    echo 'command: embree_rthwif_test --default-rtas-builder --no-instancing --triangles-committed-hit'
    echo
    echo 'testname: rthwif_test_triangles_potential_hit'
    echo 'command: embree_rthwif_test --default-rtas-builder --no-instancing --triangles-potential-hit'
    echo
    echo 'testname: rthwif_test_triangles_anyhit_shader_commit'
    echo 'command: embree_rthwif_test --default-rtas-builder --no-instancing --triangles-anyhit-shader-commit'
    echo
    echo 'testname: rthwif_test_triangles_anyhit_shader_reject'
    echo 'command: embree_rthwif_test --default-rtas-builder --no-instancing --triangles-anyhit-shader-reject'
    echo
    echo 'testname: rthwif_test_procedurals_committed_hit'
    echo 'command: embree_rthwif_test --default-rtas-builder --no-instancing --procedurals-committed-hit'
    echo
    echo 'testname: rthwif_test_hwinstancing_triangles_committed_hit'
    echo 'command: embree_rthwif_test --default-rtas-builder --hw-instancing --triangles-committed-hit'
    echo
    echo 'testname: rthwif_test_hwinstancing_triangles_potential_hit'
    echo 'command: embree_rthwif_test --default-rtas-builder --hw-instancing --triangles-potential-hit'
    echo
    echo 'testname: rthwif_test_hwinstancing_triangles_anyhit_shader_commit'
    echo 'command: embree_rthwif_test --default-rtas-builder --hw-instancing --triangles-anyhit-shader-commit'
    echo
    echo 'testname: rthwif_test_hwinstancing_procedurals_committed_hit'
    echo 'command: embree_rthwif_test --default-rtas-builder --hw-instancing --procedurals-committed-hit'
    echo
    echo 'testname: rthwif_test_swinstancing_triangles_committed_hit'
    echo 'command: embree_rthwif_test --default-rtas-builder --sw-instancing --triangles-committed-hit'
    echo
    echo 'testname: rthwif_test_swinstancing_triangles_potential_hit'
    echo 'command: embree_rthwif_test --default-rtas-builder --sw-instancing --triangles-potential-hit'
    echo
    echo 'testname: rthwif_test_swinstancing_triangles_anyhit_shader_commit'
    echo 'command: embree_rthwif_test --default-rtas-builder --sw-instancing --triangles-anyhit-shader-commit'
    echo
    echo 'testname: rthwif_test_swinstancing_triangles_anyhit_shader_reject'
    echo 'command: embree_rthwif_test --default-rtas-builder --sw-instancing --triangles-anyhit-shader-reject'
    echo
    echo 'testname: rthwif_test_swinstancing_procedurals_committed_hit'
    echo 'command: embree_rthwif_test --default-rtas-builder --sw-instancing --procedurals-committed-hit'
    echo

id: crucibletests
plugin: resource
command:
    echo 'testgroup: stencil-triangles'
    echo 'filter: func.depthstencil.stencil-triangles.clear-0x17.ref-0x17.*'
    echo
    echo 'testgroup: aspect-stencil'
    echo 'filter: func.miptree.s8-uint.aspect-stencil.view-2d.levels02.*'
    echo
    echo 'testgroup: aspect-depth'
    echo 'filter: func.miptree.d32-sfloat.aspect-depth.*'
    echo
    echo 'testgroup: r8g8b8a8-aspect-color'
    echo 'filter: func.miptree.r8g8b8a8-unorm.aspect-color.*'
    echo
    echo 'testgroup: bc3-aspect-color'
    echo 'filter: func.miptree.bc3-unorm.aspect-color.*'
    echo
    echo 'testgroup: bench'
    echo 'filter: bench.*'
    echo
    echo 'testgroup: bug'
    echo 'filter: bug.*'
    echo
    echo 'testgroup: depthstencil'
    echo 'filter: func.depthstencil.*'
    echo
    echo 'testgroup: desc'
    echo 'filter: func.desc.*'
    echo
    echo 'testgroup: draw'
    echo 'filter: func.draw*'
    echo
    echo 'testgroup: gs-basic'
    echo 'filter: func.gs.basic'
    echo
    echo 'testgroup: first'
    echo 'filter: func.first'
    echo
    echo 'testgroup: compute'
    echo 'filter: func.compute.*'
    echo
    echo 'testgroup: shader'
    echo 'filter: func.shader.*'
    echo
    echo 'testgroup: issue'
    echo 'filter: func.issue*'
    echo
    echo 'testgroup: mesh'
    echo 'filter: func.mesh.*'
    echo
    echo 'testgroup: example'
    echo 'filter: example.*'
    echo
    echo 'testgroup: buffer'
    echo 'filter: func.buffer.*'
    echo
    echo 'testgroup: cmd-buffer'
    echo 'filter: func.cmd-buffer.*'
    echo
    echo 'testgroup: copy'
    echo 'filter: func.copy.*'
    echo
    echo 'testgroup: event'
    echo 'filter: func.event.*'
    echo
    echo 'testgroup: query'
    echo 'filter: func.query.*'
    echo
    echo 'testgroup: interleaved-cmd-buffers'
    echo 'filter: func.interleaved-cmd-buffers.*'
    echo
    echo 'testgroup: memory_budget'
    echo 'filter: func.memory_budget'
    echo
    echo 'testgroup: renderpass'
    echo 'filter: func.renderpass.*'
    echo
    echo 'testgroup: memory-fd'
    echo 'filter: func.memory-fd.*'
    echo
    echo 'testgroup: stress'
    echo 'filter: stress.*'
    echo
    echo 'testgroup: self'
    echo 'filter: self.*'
    echo
    echo 'testgroup: calibrated-timestamps'
    echo 'filter: func.calibrated-timestamps.*'
    echo
    echo 'testgroup: sync'
    echo 'filter: func.sync.*
    echo


unit: template
template-resource: levelzerobins
template-filter: levelzerobins.binname != ''
template-engine: jinja2
template-unit: job
id: gfx_level_zero_{{ binname }}
category_id: level-zero
flags: simple
user: root
_summary: Run the {{ binname }} test from level zero tests
environ:
  # necessary for local mode
  XDG_SESSION_TYPE
  XDG_RUNTIME_DIR
  NORMAL_USER
requires: cpuinfo.type == 'GenuineIntel'
estimated_duration: 1m
command:
  echo "{{ command }}"
  (cd /usr/local/checkbox-gfx; {{ command }})

unit: template
template-resource: levelzeroraytracingtests
template-filter: levelzeroraytracingtests.testname != ''
template-engine: jinja2
template-unit: job
id: gfx_level_zero_rt_{{ testname }}
category_id: level-zero-raytracing
flags: simple
user: root
_summary: Run the {{ testname }} test from level zero tests
requires: cpuinfo.type == 'GenuineIntel'
environ:
  # necessary for local mode
  XDG_SESSION_TYPE
  XDG_RUNTIME_DIR
  NORMAL_USER
estimated_duration: 1m
command:
  SYCL_BUNDLE_ROOT=/usr/local/checkbox-gfx/sycl_linux/
  PATH=$PATH:$SYCL_BUNDLE_ROOT/../level-zero-raytracing-support/build/
  LD_LIBRARY_PATH=$SYCL_BUNDLE_ROOT/lib:$LD_LIBRARY_PATH
  LD_LIBRARY_PATH=$SYCL_BUNDLE_ROOT/linux/lib/x64:$LD_LIBRARY_PATH
  LD_LIBRARY_PATH=$SYCL_BUNDLE_ROOT/lib/oclgpu:$LD_LIBRARY_PATH
  echo "{{ command }}"
  {{ command }}

unit: template
template-resource: crucibletests
template-filter: crucibletests.testgroup != ''
template-engine: jinja2
template-unit: job 
id: gfx_mesa_crucible_{{ testgroup }}
category_id: mesa
flags: simple
user: root
_summary: Run the {{ testgroup }} test from crucible tests
environ: 
  # necessary for local mode
  XDG_SESSION_TYPE 
  XDG_RUNTIME_DIR
estimated_duration: 1m
command: 
  # --fork is used because the documentation indicates that it will prevent 
  # individual tests from crashing the main thread. Remove it if debugging
  (cd /usr/local/checkbox-gfx/crucible; XDG_RUNTIME_DIR=/run/user/1000 ./bin/crucible run --fork '{{ filter }}' > /tmp/crucible_{{ testgroup }}_out.txt)
  cat /tmp/crucible_{{ testgroup }}_out.txt
  # This is a workaround for the fact that crucible ls-tests shows top-level tests such as
  # func.depthstencil.stencil-triangles.clear-0x17.ref-0x17.compare-op-always.pass-op-zero.fail-op-invert
  # but the test has multiple versions (.q0, .q1, .q2), which will return an error if
  # run together, even if they do not return an error when running separately
  # with the same result. So this just runs everything together and checks to
  # see if the output mentions any failed tests. 
  if(grep "crucible: info   : fail 0" /tmp/crucible_{{ testgroup }}_out.txt); then
    echo "The test indicates no test failures. Passing test!"
    rm /tmp/crucible_{{ testgroup }}_out.txt
    exit 0
  fi
  >&2 echo "Non-zero test failure value. Test failed!"
  rm /tmp/crucible_{{ testgroup }}_out.txt
  exit 1
